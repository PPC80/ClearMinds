@echo off

SET parameters=%undefined%
SET user=user=admin
SET pass=password=C0bis2019
echo %parameter%
cd ..
#sam build

# Para Desarrollo Nuevo DM1
sam package --s3-bucket aws-sam-cli-managed-default-samclisourcebucket-1rs8miw3huk54 --s3-prefix ATM-YLA --region us-east-1 --output-template-file out.yaml
sam deploy --stack-name ATM-YLA --s3-bucket aws-sam-cli-managed-default-samclisourcebucket-1rs8miw3huk54 --s3-prefix ATM-YLA --region us-east-1 --capabilities CAPABILITY_IAM CAPABILITY_AUTO_EXPAND CAPABILITY_NAMED_IAM --no-confirm-changeset true --parameter-overrides DbTarget=master LogLevel=INFO Module=Atm MonitoringEventSource=cobis.lambda.function MonitoringEventType=business-logic-execution-event ParametersStoreCacheExpirationTime=120 RegisterAuditLambda=cobis-audit-create-record UpdateAuditLambda=cobis-audit-update-record LambdaAuthorizer=auth-authorization-challenge skipParameterStore=true ModuleTagToLower=atm Organization=Cobiscorp Package="COBIS CORE BANKING" EnvironmentType="DEVELOPMENT" EnvironmentIdBaseFront="yla" AwsAccountIdToDeploy="681989517074" EnvironmentIdBase="dev" EnvironmentId="yla" TenantId="t1" Project="Core Serverless" Product="Atm" UserDatabaseReadReplica=%user% PasswordDatabaseReadReplica=%pass% UserDatabaseMaster=%user% PasswordDatabaseMaster=%pass% SharedResourcesAccount="125277160564" UserPoolId="us-east-1_wm61L3yxy" DaysRetention=7 ValueApiKey="yalpmqwertyuioplkjhgfdpp64" SubnetIds="subnet-0eddad8c54d7b4c12,subnet-04451e9e1e67a29a1" KmsKeyId="530e1864-b01a-4fa9-9762-eaf7c3b268ed" DBReading="jdbc:mysql://dm1-gp-mysql-aurora-cluster-rds.cluster-ck9mgilqxnyv.us-east-1.rds.amazonaws.com:3306/cobis?strictUpdates=false&connectionCollation=utf8_general_ci&sessionVariables=sql_mode=PIPES_AS_CONCAT" ConnectionUrl="jdbc:mysql://dm1-gp-mysql-aurora-cluster-rds.cluster-ck9mgilqxnyv.us-east-1.rds.amazonaws.com:3306/cobis?strictUpdates=false&connectionCollation=utf8_general_ci&sessionVariables=sql_mode=PIPES_AS_CONCAT" RetrieveAuditLambda="cobis-audit-get-record" APIGatewayName="COBIS_API_ATM " DaysRetentionQA=7 LambdaAliasBeta="beta" LambdaAliasProduction="production" DaysRetentionDev=1 SecurityGroupIds="sg-0a05685831d407f2c" RegionToDeploy="us-east-1" DBConnectionExpirationTime=300 DaysRetentionProd=30 DashboardName="COBIS_API_ATM" DBProxy="jdbc:mysql://dm1-gp-mysql-aurora-cluster-rds.cluster-ck9mgilqxnyv.us-east-1.rds.amazonaws.com:3306/cobis?strictUpdates=false&connectionCollation=utf8_general_ci&sessionVariables=sql_mode=PIPES_AS_CONCAT" EnvironmentIdInternal=dev SecretArn="arn:aws:secretsmanager:us-east-1:681989517074:secret:/dm1/DemandDepositsSrv/database/credentials-lwJ5E5" EcsTaskExecutionRole="arn:aws:iam::681989517074:role/dm1-batch-task-execution-role" AWSBatchServiceRole="arn:aws:iam::681989517074:role/dm1-batch-compute-service-role" TracingMode=false AWSBatchServiceRole="arn:aws:iam::681989517074:role/dm1-batch-compute-service-role" EnvironmentIdBaseAutorizer=dev DynamoTableName="atm-process-file" DockerEcrRepositoryUrl="125277160564.dkr.ecr.us-east-1.amazonaws.com/cobis/cts/xsell" DockerTag="cobis-atm-reconciliation-microservice-1.0.0.2107301050-beta-e637007.mysql" ClusterECSId="dm1-cobis-gp-ecs-cluster" CronHourExpression="12" CronMinuteExpression="00" HealthCheckUrl="/" RtpMicroServicePort=8098 PrivateLoadBalancer="arn:aws:elasticloadbalancing:us-east-1:681989517074:loadbalancer/app/dm1-gp-private-load-balancer/43445eff3fee9dd6" VpcId="vpc-077e1cae54cedab99" FrontMicroServicePort="8099" -t out.yaml
